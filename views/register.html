
<form action='#' id ="registerForm" >
    <input type="hidden" , name="_csrf" , value=<%=csrfToken %>> </input>

    <input type="text" name="name" ></input>

    <input type = "text" name="email" ></input>
    
    <input type = "text" name="password" ></input>

    
</form>
<br>
<button class ="btn" id="registerButton" action = "submit"> Submit </button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js" ></script>
<script>
    $(document).ready(function(){
        $("#registerButton").on('click',function(){
            body = ($("#registerForm").serialize());
            console.log(body)
                    $.ajax({
                method: 'POST',
                url: `/register`,
                // dataType: "json"
                data: body
 //               contentType: "application/json",
            })
            .done(function (data) {
                console.log(data)
                 if (typeof data.redirect === 'string' || data.redirect instanceof String) {
                     console.log(data)
                     console.log(location.protocol + '//' + data.redirect )
                     alert(data.message);
                    location.href = location.protocol + '//' + data.redirect 
                 }else{

                    alert(JSON.stringify(data));
                    // location.reload();
                };
            });
        })
         });
</script>
