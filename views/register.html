
<form action='#' id ="registerForm" >
    <input type="hidden" , name="_csrf" , value=<%=csrfToken %>> </input>

    <input type="text" name="name" ></input>

    <input type = "text" name="email" ></input>
    
    <input type = "text" name="password" ></input>

    
</form>
<br>
<button class ="btn" id="registerButton" action = "submit"> Submit </button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js" ></script>
<script>
    $(document).ready(function(){
        $("#registerButton").on('click',function(){
            body = ($("#registerForm").serialize());
            console.log(body)
                    $.ajax({
                method: 'POST',
                url: `/register`,
                data: body
 //               contentType: "application/json",
                // dataType: "json"
            })
            .done(function (data) {
                 if (typeof data === 'string' || data instanceof String) {
                     console.log(data)
                     console.log(location.protocol + '//' + data )
                     alert('You have successfully registered, click on the link in the email we have sent you to verify your account.');
                    location.href = location.protocol + '//' + data 
                 }else{

                    alert(JSON.stringify(data));
                    // location.reload();
                };
            });
        })
         });
</script>
