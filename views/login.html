<div class = "container">
  <div class = "row">
      
      <form action="/login", method="POST" id= "loginForm">
        <input type="hidden", name="_csrf", value= <%=csrfToken %>> </input>
        
        <h4> Email </h4>
        <input type="email", name="email">
        <br>
        
        <h4> Password </h4>
        <input type="password", name="password"> </input>
        <br>
        
      </form>
      <button id="loginButton" action = "submit"> Submit </button>
      <a href="/emailresetpassword">Forgot Password?</a>
      <a href="/register">Register</a>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
<script>
  $(document).ready(function () {
    $("#loginButton").on('click', function () {
      body = ($("#loginForm").serialize());
      console.log(body)
      $.ajax({
        method: 'POST',
        url: `/login`,
        data: body
            })
        .done(function (data) {
          console.log(data)
          if (typeof data.redirect === 'string' || data.redirect instanceof String) {
            alert(JSON.stringify(data.message));
            location.href = location.protocol + '//' + data.redirect
          } else {
            alert(JSON.stringify(data));
          };
        });
    })
  })

</script>
